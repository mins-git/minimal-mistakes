---
layout: single
title: "[Project] User Entity 개발"
categories: Project
tag: [back-end, project]
toc: true
toc_sticky: true
toc_label: index
toc_icon: "fa-solid fa-indent"
author_profile: false
# sidebar:
#     nav: "docs"
# search: false

---



<br>

<br>

현재 글은 [User Repository 개발](https://mins-git.github.io/project/PJ_030-User_1.Repository) 글의 뒷 내용을 이어갑니다.



# User CRUD 개발과정 순서

1. ~~**Repository :**~~

   ~~데이터베이스에 접근하여 데이터를 다루는 기능을 담당하는 Repository를 먼저 구현.~~

+ ~~JpaRepository를 추가함으로써 USER CRUD 기능을 쉽게 사용하게 함.~~
+ ~~email로 user찾기 / username으로 user찾기 / id값에 해당하는 user찾기 메서드 추가.~~

2. **Entity :**

데이터베이스의 테이블과 매핑되는 객체로, 테이블의 컬럼들과 매핑되는 필드를 가지고있음.

3. **DTO :**

데이터를 전송하기 위한 객체로, Entity와 비슷하지만 HTTP 요청과 응답에서 사용하는 데이터를 가지고 있음.

4. **Controller :**

HTTP 요청을 처리하는 컴포넌트로, 클라이언트로부터 요청을 받아 Servcie에게 전달하고, Service가  처리한 결과를 다시 클라이언트에게 반환한다.

5. **Service :**

비즈니스 로직을 처리하는 컴포넌트로, Repository를 사용하여 데이터를 조작하고, 비즈니스 로직에 맞게 데이터를 가공한다.

6. **Mapper :**

Entity와 DTO 간의 변환을 담당하는 컴포넌트로, Entity를 DTO로 변환하거나, DTO를 Entity로 변환하는 등의 작업을 함 

<br>

<br>

<br>

## User Entity

Entity 클래스에 들어갈 내용은 데이터베이스 테이블의 구조와 일치해야 합니다.   

사용자(User) 테이블이 있다면 해당 테이블의 구조는 사용자의 아이디(id), 이름(name), 이메일(email), 비밀번호(password) 등으로 구성하게 될것입니다. 따라서 이 구조와 일치하는 Entity 클래스를 만들어보도록 하겠습니다.   

```java

```



🔑 point

- @GeneratedValue 어노테이션? :

`@GeneratedValue` 어노테이션은 JPA에서 Entity 클래스의 기본 키를 자동으로 생성하기 위해 사용됩니다. 이 어노테이션은 `@Id` 어노테이션과 함께 사용되며, `strategy` 속성을 통해 어떤 방식으로 기본 키를 생성할지 설정할 수 있습니다.   

그러면 strategy 속성에는 어떤 값이 있을까? ↓ `대표적인 값 3가지`   

1. `GenerationType.IDENTITY`: 데이터베이스에서 기본 키 생성을 처리합니다. 예를 들어 MySQL에서는 AUTO_INCREMENT를 사용하여 기본 키를 생성합니다.
2. `GenerationType.SEQUENCE`: 데이터베이스 시퀀스를 사용하여 기본 키를 생성합니다. 이 방식은 Oracle과 같은 몇몇 데이터베이스에서 사용할 수 있습니다.
3. `GenerationType.TABLE`: 데이터베이스의 특별한 테이블에서 기본 키 값을 가져옵니다. 이 방식은 모든 데이터베이스에서 사용할 수 있습니다.   

<BR>

**나는 MySQL을 사용할것이기에 IDENTITY 속성을 사용할 것이다.**   

`GenerationType.IDENTITY`는 매우 일반적인 전략으로, 대부분의 데이터베이스에서 지원됩니다. 다른 전략은 데이터베이스의 종류나 설정에 따라 지원되지 않을 수도 있습니다. 기본 키를 생성하는 방식은 JPA 구현체에서 지원하는 방식과 데이터베이스 종류 및 설정에 따라 달라질 수 있습니다.   

<br>

예를 들어, 다음과 같이 Entity 클래스를 작성하면 `GenerationType.IDENTITY`를 사용하여 MySQL에서 자동으로 기본 키를 생성할 수 있습니다.

```java
public class User {
 
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
}
```

<br>

위 코드에서 `@GeneratedValue(strategy = GenerationType.IDENTITY)` 어노테이션을 사용하여 데이터베이스에서 자동으로 기본 키를 생성하도록 설정합니다. 이렇게 하면 데이터베이스가 자동으로 기본 키 값을 할당하므로 개발자가 직접 기본 키를 생성하거나 설정할 필요가 없습니다.   

<br>

<br>



